module.exports = function(scope) {
  wx.getSetting({
    success: res => {
      if (!res.authSetting[scope]) {
        /**
         * wx.authorize
         * ç¬¬ä¸€æ¬¡æ—¶å€™ å°ç¨‹åºä¼šå¼¹å‡ºè‡ªèº«å†…ç½®çš„æˆæƒçª—
         * å› ä¸ºsuccesså’Œfailå±äºå›è°ƒ, å°ç¨‹åºè‡ªèº«å†…ç½®çš„æˆæƒçª—å¼¹å‡ºåˆ°ç¡®è®¤æœŸé—´, successå’Œfailæ˜¯ä¸ä¼šè¿è¡Œ, å§‘ä¸”å°±å½“æ˜¯ç¨‹åºæš‚åœğŸ›‘
         * ç”¨æˆ·ç‚¹åŒæ„, å‡†å¤‡è¿è¡Œsuccess
         * ç”¨æˆ·ç‚¹å–æ¶ˆ, å‡†å¤‡è¿è¡Œfail
         * ç”¨æˆ·ç‚¹å–æ¶ˆå, åç»­è¯·æ±‚æˆæƒæ—¶è°ƒç”¨wx.authorize, ä¸ä¼šå¼¹å‡ºå°ç¨‹åºä¼šå¼¹å‡ºè‡ªèº«å†…ç½®çš„æˆæƒçª—, ç›´æ¥å‡†å¤‡è¿è¡Œfail
         * btw å¯ä»¥é€šè¿‡åœ¨è°ƒå¼å·¥å…·ä¸­æ¸…é™¤æˆæƒç¼“å­˜, å°ç¨‹åºä¼šé‡æ–°å¼¹å‡ºè‡ªèº«å†…ç½®çš„æˆæƒçª—
         */
        wx.authorize({
          scope,
          success: () => {
            // æˆæƒæˆåŠŸ
          },
          fail: error => {
            /**
             * æˆæƒ æ¥å£è°ƒç”¨å¤±è´¥
             * è¿™é‡Œå°±éœ€è¦å‰ç«¯ç»™å‡ºå¼•å¯¼çš„äº¤äº’UI(ä¸å¯ç›´æ¥é€šè¿‡è°ƒç”¨æ¥å£çš„æ–¹å¼)ğŸš©
             * å¼•å¯¼ç”¨æˆ·è¿›å…¥å°ç¨‹åºçš„è®¾ç½®ç•Œé¢
             * å…·ä½“å¼•å¯¼æ˜¯è®©ç”¨æˆ·å‘ç”Ÿç‚¹å‡»è¡Œä¸º, ç„¶åè°ƒç”¨wx.openSetting, ä¸å¯ç›´æ¥è°ƒç”¨æ­¤æ¥å£
             */
          }
        })
      } else {
        // scopeæƒé™å·²ç»å¼€å¯
      }
    },
    fail: () => {
      // getSetting æ¥å£è°ƒç”¨å¤±è´¥
    }
  })
}